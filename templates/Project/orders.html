{% extends "base.html" %}

{% block head %}
    <link href="/static/css/jquery.dataTables.css" rel="stylesheet">
    <link href="/static/css/dataTables.bootstrap.css" rel="stylesheet">
    <script src="/static/js/jquery.dataTables.js" type="text/javascript"></script>
    <script src="/static/js/dataTables.bootstrap.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#all_orders").dataTable();
        });
    </script>
{% endblock %}

{% block contents %}
    <div class="page-header">
        <h1 class="page-title">Orders</h1>
    </div>
     <div class="row">
        <div class="col-sm-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Last 5 Orders</h3>
                </div>
                <div class="panel-body">
                    {% if recent_orders %}
                        <table class="table">
                            <thead>
                                <tr><th>Date Placed</th><th>Supplier</th><th>Expected Delivery</th></tr>
                            </thead>
                            <tbody>
                                {% for order in recent_orders %}
                                    <tr><td>{{ order.date_placed }}</td><td>{{ order.supplier.name }}</td><td>{{ order.expected_delivery }}</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        No orders placed
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-sm-8">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">All Orders</h3>
                </div>
                <div class="panel-body">
                    {% if all_orders %}
                        <table id="all_orders">
                            <thead>
                                <tr><th>Date Placed</th><th>Supplier</th><th>Expected Delivery</th><th>Date Arrived</th></tr>
                            </thead>
                            <tbody>
                                {% for order in all_orders %}
                                    <tr><td>{{ order.date_placed }}</td><td>{{ order.supplier.name }}</td><td>{{ order.expected_delivery }}</td><td>{{ order.date_arrived }}</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        No orders placed
                    {% endif %}
                </div>
            </div>
        </div>
     </div>
     <div class="row">
        <div class="col-sm-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Arrivals in the Last 14 Days</h3>
                </div>
                <div class="panel-body">
                    {% if recent_arrivals %}
                        <table class="table">
                            <thead>
                                <tr><th>Date Placed</th><th>Supplier</th></tr>
                            </thead>
                            <tbody>
                                {% for order in recent_arrivals %}
                                    <tr><td>{{ order.date_placed }}</td><td>{{ order.supplier.name }}</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        No orders arrived
                    {% endif %}
                </div>
            </div>
        </div>
     </div>

{% endblock %}